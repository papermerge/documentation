<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apps &mdash; Papermerge DMS  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="Document Pipelines" href="document_pipelines.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Papermerge DMS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation/index.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Help/index.html">Help</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User’s Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html">User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="tags_and_folders.html">Tags and Folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_management.html">Page Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions.html">Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="automates.html">Automates</a></li>
<li class="toctree-l2"><a class="reference internal" href="consumption.html">Consumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest_api.html">REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocr_languages.html">OCR Languages Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_formats.html">File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_pipelines.html">Document Pipelines</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Apps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#papermerge-core">Papermerge Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="#meet-papermerge-apps">Meet Papermerge Apps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-basic-app">Writing Basic App</a></li>
<li class="toctree-l3"><a class="reference internal" href="#document-parts">Document Parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#document-widgets">Document Widgets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contributing/index.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Papermerge DMS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">User’s Manual</a> &raquo;</li>
      <li>Apps</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/User&#39;s Manual/apps.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="apps">
<h1>Apps<a class="headerlink" href="#apps" title="Permalink to this headline"></a></h1>
<p>From the very beginning of its existence, Papermerge started to receive
features requests. Many of those requests made perfect sense and were
implemented (or will be implemented). It is thanks to the  community’s
feedback and contributions that Papermerge evolves naturally into a mature
archives management system.</p>
<p>However, a great number of features requests were subject to debate, or just
not suitable for majority of users. A very good example of such feature is
duplicates removal. First of all, how to define that a specific document is a
duplicate (of other document)?</p>
<p>There are at least three possibilities:</p>
<ol class="arabic simple">
<li><p>duplicate are documents with same file name</p></li>
<li><p>duplicates are documents with same digest value</p></li>
<li><p>duplicates are those documents where extracted text is &gt;= 95% similar (i.e. very similar)</p></li>
</ol>
<p>Each of points above has pros and cons. Each of them may be right under
specific circumstances and for specific user or company requirements. By
default, Papermerge does not implement any of those points. Event more, if you
upload same files (with same content and even same filename) it will gladly
accept them. In the end, whole this document duplicates thingy is just a
matter of preference.</p>
<p>Apps were introduced to address such issues. App (or plugin if you like) is a
way extend base Papermerge application. Continuing with above example with
document duplicates, by adding/removing specific Papermerge app you can
add/remove specific document duplicate detection criteria. This way, Papermerge
base application, which is called Papermerge Core will contain only essential
features.</p>
<section id="papermerge-core">
<h2>Papermerge Core<a class="headerlink" href="#papermerge-core" title="Permalink to this headline"></a></h2>
<p>On the other hand, document management system are complex applications, with
rich set of requirements such as LDAP authentication, document electronic
signatures and even such fancy things as data retention policies. Not
everybody needs LDAP authentication though. Also, not everybody uses document
electronic signatures and data retention policies. These type of features are
very good candidates for Papermerge apps. All non essential features will be
implemented as apps which can be easily plugged or removed.</p>
</section>
<section id="meet-papermerge-apps">
<h2>Meet Papermerge Apps<a class="headerlink" href="#meet-papermerge-apps" title="Permalink to this headline"></a></h2>
<p>Papermerge app is basically a Django app with few extras. You may wonder what
is Django app anyway? First of all, Papermerge is build with help of web
framework called <a class="reference external" href="https://www.djangoproject.com/">Django</a>. Secondly,
Papermerge project is a Django project which in turn is a loose collection of
Django apps plus (project) settings. Figure 1 illustrates this idea.</p>
<figure class="align-default" id="id1">
<img alt="Papermerge project is basically Django project" src="../_images/papermerge-project.svg" /><figcaption>
<p><span class="caption-text">Figure 1. Illustrates that Papermerge project is composed of a number of apps plus
configuration settings. Papermerge project is very same as Django project.</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Notice that Papermerge Core app is part of every Papermerge project.</p>
</section>
<section id="writing-basic-app">
<h2>Writing Basic App<a class="headerlink" href="#writing-basic-app" title="Permalink to this headline"></a></h2>
<p>The gory details of how to develop apps and include them into papermerge
project are explained in contributing guide. Here, in user manual, only high
level concepts are explained.</p>
<p>Let’s consider an app which will detect file name duplicates i.e. an app which
if used, will issue an error when user tries to upload twice documents with same
file names. Keep in mind that here the goal is to familiarize with general
concepts.</p>
<p>Inside Papermerge project create a new django app:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">create new app</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./manage.py startapp filebased_unique
</pre></div>
</div>
</div>
<p>To highlight that filebased_unique app is part of papermerge ecosystem, it will be moved into a namespace papermerge (which is just an extra folder):</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">move filebased_unique django app inside papermerge folder</span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir papermerge
$ mv filebased_unique papermerge/
</pre></div>
</div>
</div>
<p>Also, change <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">label</span></code> app attributes as shown below:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">change <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">label</span></code> attributes</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.apps</span> <span class="kn">import</span> <span class="n">AppConfig</span>


<span class="k">class</span> <span class="nc">FilebasedUniqueConfig</span><span class="p">(</span><span class="n">AppConfig</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;papermerge.filebased_unique&#39;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;filebased_unique&#39;</span>
</pre></div>
</div>
</div>
<p>The heart of papermerge.filebased_unique app is file
papermerge/filebased_unique/models.py where core document model is extended as
following:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">extend document model</span><a class="headerlink" href="#id5" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.core.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="kn">from</span> <span class="nn">papermerge.core.models</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">AbstractDocument</span>


<span class="k">class</span> <span class="nc">DocumentPart</span><span class="p">(</span><span class="n">AbstractDocument</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_file_name</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">file_name</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
                <span class="s2">&quot;Document file_name duplicates detected&quot;</span>
            <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Here is link to <a class="reference external" href="https://github.com/papermerge/papermerge-filebased-unique">app code</a> on GitHub.</p>
</section>
<section id="document-parts">
<h2>Document Parts<a class="headerlink" href="#document-parts" title="Permalink to this headline"></a></h2>
<p>Apps are there not just for adding extra validations, you can add extra fields
to the core document as well.</p>
<p>For example, in case you want to add a special UUID field to the document model, you can:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">extend core document model with extra fields</span><a class="headerlink" href="#id6" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="kn">from</span> <span class="nn">papermerge.core.models</span> <span class="kn">import</span> <span class="n">AbstractDocument</span>


<span class="k">class</span> <span class="nc">DocumentPart</span><span class="p">(</span><span class="n">AbstractDocument</span><span class="p">):</span>

    <span class="n">special_uuid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span>
        <span class="n">editable</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Those extra fields added by apps to core document model - are called <em>document
parts</em>. Papermerge application treats core document fields and those extra
fields added by apps as one whole:</p>
<figure class="align-default" id="id7">
<img alt="Papermerge treats all document parts augmentet by apps as one whole" src="../_images/document-parts.svg" /><figcaption>
<p><span class="caption-text">Figure 2. Papermerge treats all document parts augmentet by external apps as one whole.</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>This way, any user or company, can extend core document model with whatever
number of custom fields they wish without interfering with core application
code.</p>
</section>
<section id="document-widgets">
<h2>Document Widgets<a class="headerlink" href="#document-widgets" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is experimental.</p>
</div>
<p>Each document part (i.e all those extra fields) will be visualized as widgets on the <a class="reference internal" href="user_interface.html#ui-right-side-widgets-panel-in-doc-browser"><span class="std std-ref">Right Side Widgets Panel</span></a> along with metadata widget and basic info widget.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="document_pipelines.html" class="btn btn-neutral float-left" title="Document Pipelines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, Papermerge DMS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 2.0.x
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="../../2.0.0/User's Manual/apps.html">2.0.0</a></dd>
      <dd><a href="../../2.0.1/User's Manual/apps.html">2.0.1</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../master/index.html">master</a></dd>
      <dd><a href="apps.html">2.0.x</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>